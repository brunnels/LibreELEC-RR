From 82ee889bf7372462c5c90b987b12598b6bf1e3c2 Mon Sep 17 00:00:00 2001
From: David Walters <contact@davidwaltersdevelopment.com>
Date: Tue, 5 Feb 2019 17:11:15 +0000
Subject: [PATCH] Fix for Linux builds. Mednafen defines SIZEOF_VOID_P in its
 configure script, we do something similar with a makefile.

---
 Makefile        | 2 ++
 Makefile.common | 6 ++++++
 2 files changed, 8 insertions(+)

diff --git a/Makefile b/Makefile
index 36a54e6..de55470 100644
--- a/Makefile
+++ b/Makefile
@@ -5,6 +5,8 @@ HAVE_OPENGL = 0
 HAVE_JIT = 0
 HAVE_CHD = 1
 
+IS_64BIT = 1
+
 CORE_DIR := .
 HAVE_GRIFFIN = 0
 
diff --git a/Makefile.common b/Makefile.common
index eb4d523..9de9775 100644
--- a/Makefile.common
+++ b/Makefile.common
@@ -44,6 +44,12 @@ ifeq ($(NEED_DEINTERLACER), 1)
    FLAGS += -DNEED_DEINTERLACER
 endif
 
+ifeq ($(IS_64BIT), 1)
+FLAGS += -DSIZEOF_VOID_P=8
+else
+FLAGS += -DSIZEOF_VOID_P=4
+endif
+
 ifeq ($(IS_X86), 1)
 FLAGS += -DARCH_X86
 endif
